from __future__ import division
import numpy as np
import matplotlib.pyplot as plt
# coding=utf-8


from Turbina import Turbina
from scipy import interpolate

class Turbina_BlindTest_3_TSR6(Turbina):

    def __init__(self, coord):
        d_0 = 0.944
        super(Turbina_BlindTest_3_TSR6, self).__init__(d_0, coord)

    def c_T_tabulado(self, U):

        # entiendo que hay un problema con el U_tabulado por lo que me
        # tira 'ValueError:     Error on input data', no logro ver donde esta
        # el problema, por lo tanto uso las curvas de BT2

        # testeando: el problema esta en U_tabulado
        # U_tabulado = np.arange(18)
        # U_tabulado = np.array([5.23941602338, 5.57795662165, 5.96697404436, 6.40512954079, 6.9185009052, 7.53169803911, 8.27074416595, 9.31334397269, 10.5146542732, 10.3242372216, 11.9044041163, 13.480825959, 14.8454486706, 16.8398524373, 18.9394786392, 24.4837666707, 37.3169799328, 76.8302541217])
        # c_T_tabulado = np.array([0.849723747241, 0.861351501437, 0.867629193779, 0.864500584885, 0.854468979411, 0.835866760934, 0.808834619317, 0.764095347829, 0.716490293811, 0.719544389506, 0.63973365993, 0.607824759891, 0.569526088252, 0.463827607969, 0.343459877356, 0.269069949519, 0.191626415384, 0.125200685221])

        U_tabulado = np.array([5.34202673849, 5.34821674812, 5.49082209468, 5.5499730956, 6.01282147805, 6.14282989546, 6.6362074002 , 6.8365631842 , 7.47107951259, 7.62747066874, 7.99417363535, 8.13802797218, 8.53843128522, 8.71133165447, 9.20644695454, 9.35789663044, 9.90858234027, 10.1559197559, 10.1631461122, 10.8569479944, 10.998877492 , 12.101280395 , 12.2276161803, 13.3325026775, 13.3434829036, 13.4034401628, 14.8538518879, 15.1387581127, 19.5078082327, 20.4491929249, 27.9830906435, 38.1138090374, 39.2301995964, 39.295480144 , 39.3269842268, 39.4887390637, 65.2758510091, 65.6065298926])
        c_T_tabulado = np.array([1.1165769166, 1.10234113227, 1.104641417, 1.09209267192, 1.07543862479, 1.06868057083, 1.06862544338, 1.04330601836, 1.02273510393, 1.00467465793, 0.990941599229, 0.973980338424, 0.958124139533, 0.941486356226, 0.919590797054, 0.905870026831, 0.882708383358, 0.861592864254, 0.863359370066, 0.824484594668, 0.815656436082, 0.771978992581, 0.764469311128, 0.741513143654, 0.737218903195, 0.737422358271, 0.668222782961, 0.651538568644, 0.397861884221, 0.381706732783, 0.300882883854, 0.239947674624, 0.237579050069, 0.232946082889, 0.236635820069, 0.235402739615, 0.181321292469, 0.181321292469])

        tck = interpolate.splrep(U_tabulado, c_T_tabulado, s=0)
        c_Tnew = interpolate.splev(U, tck, der=0)
        return c_Tnew

    def P_tabulado(self, U):
        Pnew = 0 ###??????
        return Pnew

    def c_P_tabulado(self, U):
        c_Pnew = 0 ###??????
        return c_Pnew


#
# coord = 0
# U = 5.23941602338
# turb = Turbina_BlindTest_3_TSR6(coord)
# c_T = turb.c_T_tabulado(U)
#
# print c_T
